<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
    <title>Calculator</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <link rel="stylesheet" href="calculator.css">	
</head>

<body>

<form name="cal">
  <table>
    <caption>계산기</caption>
    <tr>
      <th colspan="4"><input type="text" name="result" value="0"></th>  
    </tr>
    <tr>
      <td><input type="button" value="7"></td>
      <td><input type="button" value="8"></td>
      <td><input type="button" value="9"></td>
      <td><input type="button" value="+"></td>
    </tr>
    <tr>
      <td><input type="button" value="4"></td>
      <td><input type="button" value="5"></td>
      <td><input type="button" value="6"></td>
      <td><input type="button" value="-"></td>
    </tr>
    <tr>
      <td><input type="button" value="1"></td>
      <td><input type="button" value="2"></td>
      <td><input type="button" value="3"></td>
      <td><input type="button" value="*"></td>
    </tr>
    <tr>
      <td colspan="2"><input type="button" value="0"></td>
      <td><input type="button" value="%"></td>
      <td><input type="button" value="/"></td>
    </tr>
    <tr>
      <td colspan="2"><input type="button" class="clear_btn" value="clear" ></td>
      <td colspan="2"><input type="button" class="result_btn" value="=" ></td>    
    </tr>
  </table>
</form>

<script>
    // 변수 선언
    let $calculator = $('form[name=cal]');                      // form 객체
    let $input = $calculator.find('input');                     // input 객체
    let $clear_btn = $('.clear_btn');                           // 초기화 버튼
    let $result_btn = $('.result_btn');                         // 결과 버튼
    let $result = $calculator.find('input[name=result]');       // 결과창

    // 계산기 초기화(clear)
    function clear() {
        $result.val(0);
    }

    // 계산기 입력 처리 함수
    function calcInput(value) {
        // 입력이 들어가면 0을 지움
        if($result.val() == 0) {
            $result.val('');
        }
        // 입력 값을 결과 출력창에 출력
        let val = $result.val() + value;
        $result.val(val);
    }

    // 계산 결과 처리 함수
    function calcOutput() {
        let calcResult = eval($result.val());
        // 결과 창에 표시
        $result.val(calcResult);
    }

    // 이벤트 핸들러
    // ------------------------------------------------------------
    // 숫자 및 사칙 연산 버튼   
    $('input').click(function() {
        let $input_value = $(this).val();

        // 숫자와 사칙 연산자만 입력 처리
        if ($input_value != '=' && $input_value != 'clear') {
            calcInput($input_value);
        }
    });

    // 초기화 버튼
    $('.clear_btn').click(function() {
        clear();
    })

    //결과 버튼
    $('.result_btn').click(function() {
        try {
            calcOutput();
        }
        catch (err) {
            $result.val('입력 오류');
        }
    });

</script>

</body>
</html>